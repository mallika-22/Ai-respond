<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>à¸£à¸°à¸šà¸šà¸–à¸²à¸¡à¸•à¸­à¸šà¸”à¹‰à¸§à¸¢à¹€à¸ªà¸µà¸¢à¸‡ (.m4a)</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 3rem;
      background: linear-gradient(to bottom, #e0f7fa, #ffffff);
    }

    h1 {
      color: #00796b;
    }

    button {
      padding: 1rem 2rem;
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      background-color: #00796b;
      color: white;
      cursor: pointer;
      margin: 0.5rem;
    }

    button:hover {
      background-color: #004d40;
    }

    #result {
      margin-top: 1rem;
      font-size: 1.2rem;
      color: #333;
      white-space: pre-line;
    }
  </style>
</head>
<body>

  <h1>ğŸ™ï¸ à¸£à¸°à¸šà¸šà¸–à¸²à¸¡à¸•à¸­à¸šà¸”à¹‰à¸§à¸¢à¹€à¸ªà¸µà¸¢à¸‡</h1>
  <button id="startBtn">ğŸ¤ à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¹à¸”</button>
  <button id="randomBtn">ğŸ² à¸ªà¸¸à¹ˆà¸¡à¹€à¸ªà¸µà¸¢à¸‡</button>
  <div id="result"></div>

  <audio id="audioPlayer" type="audio/mp4"></audio>

  <script>
    const startBtn = document.getElementById("startBtn");
    const randomBtn = document.getElementById("randomBtn");
    const resultDiv = document.getElementById("result");
    const audioPlayer = document.getElementById("audioPlayer");

    // âœ… à¸„à¸³à¸à¸¹à¸”à¸—à¸µà¹ˆà¸¡à¸µà¸«à¸¥à¸²à¸¢à¸„à¸³à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹‚à¸¢à¸‡à¸à¸±à¸šà¹€à¸ªà¸µà¸¢à¸‡à¹€à¸”à¸µà¸¢à¸§
    const keywordMap = [
      { keywords: ["à¸à¸²à¸£à¸›à¸¥à¹ˆà¸­à¸¢à¸§à¸²à¸‡","à¸›à¸¥à¹ˆà¸­à¸¢à¸§à¸²à¸‡"], file: "A1.m4a" },
      { keywords: ["à¸—à¸±à¸à¸©à¸´à¸“"], file: "A2.m4a" },
      { keywords: ["à¸à¸²à¸"], file: "A3.m4a" },
      { keywords: ["à¸šà¸¸à¸à¸šà¸²à¸›","à¸šà¸²à¸›","à¸šà¸¸à¸"], file: "A4.m4a" },
      { keywords: ["à¸„à¸§à¸²à¸¡à¸«à¸¥à¸‡","à¸­à¸¢à¹ˆà¸²à¸«à¸¥à¸‡","à¸Šà¸¡","à¸”à¹ˆà¸²"], file: "A5.m4a" },
      { keywords: ["à¸ªà¸±à¸‡à¸‚à¸²à¸£","à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¹€à¸—à¸µà¹ˆà¸¢à¸‡"], file: "A6.m4a" },
      { keywords: ["à¸à¸²à¸£à¸—à¸³à¸”à¸µà¸—à¸³à¸Šà¸±à¹ˆà¸§","à¸„à¸§à¸²à¸¡à¸”à¸µà¸„à¸§à¸²à¸¡à¸Šà¸±à¹ˆà¸§","à¸”à¸µ","à¸Šà¸±à¹ˆà¸§"], file: "A7.m4a" }
    ];

    const randomSounds = [
      "random/1.m4a",
      "random/2.m4a",
      "random/3.m4a"
    ];

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "th-TH";
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    startBtn.onclick = () => {
      resultDiv.textContent = "ğŸ§ à¸à¸³à¸¥à¸±à¸‡à¸Ÿà¸±à¸‡...";
      recognition.start();
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      resultDiv.textContent = `"${transcript}"`;

      let found = false;

      for (const entry of keywordMap) {
        for (const keyword of entry.keywords) {
          if (transcript.includes(keyword)) {
            audioPlayer.src = entry.file;
            audioPlayer.play();
            resultDiv.textContent += ``;
            found = true;
            break;
          }
        }
        if (found) break;
      }

      if (!found && transcript.includes("à¸«à¸¥à¸±à¸à¸˜à¸£à¸£à¸¡")) {
        const randomIndex = Math.floor(Math.random() * randomSounds.length);
        const randomFile = randomSounds[randomIndex];
        audioPlayer.src = randomFile;
        audioPlayer.play();
        resultDiv.textContent += ``;
        found = true;
      }

      if (!found) {
        resultDiv.textContent += "\n(à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”à¹„à¸§à¹‰)";
      }
    };

    recognition.onerror = (event) => {
      resultDiv.textContent = `âŒ à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”: ${event.error}`;
    };

    randomBtn.onclick = () => {
      const randomIndex = Math.floor(Math.random() * randomSounds.length);
      const randomFile = randomSounds[randomIndex];
      audioPlayer.src = randomFile;
      audioPlayer.play();
      resultDiv.textContent = `ğŸ² à¹€à¸¥à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸¸à¹ˆà¸¡: ${randomFile}`;
    };
  </script>

</body>
</html>
